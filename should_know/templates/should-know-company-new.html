{% extends "should-know.html" %}
{% load staticfiles %}

{% block head-css-story %}
    <!-- include libraries(jQuery, bootstrap, fontawesome) -->
    <link href="//netdna.bootstrapcdn.com/bootstrap/3.0.1/css/bootstrap.min.css" rel="stylesheet">
    <link href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.min.css" rel="stylesheet">
    <!-- include chosen css-->
    <link href="{% static 'css/plugins/chosen/chosen.css' %}" rel="stylesheet">
    <!-- include chosen dropzone-->
    <link href="{% static 'css/plugins/dropzone/basic.css' %}" rel="stylesheet">
    <link href="{% static 'css/plugins/dropzone/dropzone.css' %}" rel="stylesheet">
    <!-- include formValidation css-->
    <link href="{% static 'css/plugins/formValidation/formValidation.min.css' %}" rel="stylesheet">
    <!-- include my own rules-->
    <link href="{% static 'css/project.css' %}" rel="stylesheet">

{% endblock %}

{% block javascript-should-know-editor %}

{#    <!-- DROPZONE -->#}
{#    <script src="{% static 'js/plugins/dropzone/dropzone.js' %}"></script>#}
{#    <script type="text/javascript">#}
{#        jQuery(document).ready(function()#}
{#        {#}
{#            var myDropzone = new Dropzone("div#myId", { url: "file-upload-photo"});#}
{#        });#}
{#    </script>#}

    <!-- Chosen -->
    <script src="{%  static 'js/plugins/chosen/chosen.jquery.js' %}"></script>
    <script>
            var config = {
                '.chosen-select'           : {},
                '.chosen-select-deselect'  : {allow_single_deselect:true},
                '.chosen-select-no-single' : {disable_search_threshold:10},
                '.chosen-select-no-results': {no_results_text:'Oops, nothing found!'},
                '.chosen-select-width'     : {width:"95%"}
                };
            for (var selector in config) {
                $(selector).chosen(config[selector]);
            }
    </script>

    <!-- FormValidation -->
    <script src="{%  static 'js/plugins/formValidation/formValidation.min.js' %}"></script>
    <script src="{%  static 'js/plugins/formValidation/bootstrap.min.js' %}"></script>
    <script>
        $(document).ready(function() {
            $('#shouldKnowCompanyForm')
                .formValidation({
                    framework: 'bootstrap',
                    excluded: [':disabled'],
                    icon: {
                        valid: 'glyphicon glyphicon-ok validation-icon',
                        invalid: 'glyphicon glyphicon-remove validation-icon',
                        validating: 'glyphicon glyphicon-refresh validation-icon'
                    },
                    fields: {
                        name: {
                            validators: {
                                notEmpty: {
                                    message: 'Company name is required and cannot be empty'
                                }
                            }
                        },
                        description: {
                            validators: {
                                notEmpty: {
                                    message: 'Company description is required and cannot be empty'
                                }
                            }
                        },
                        location: {
                            validators: {
                                notEmpty: {
                                    message: 'Company location is required and cannot be empty'
                                }
                            }
                        },
                        email: {
                            validators: {
                                notEmpty: {
                                    message: 'Company email is required and cannot be empty'
                                }
                            }
                        },
                        link: {
                            validators: {
                                notEmpty: {
                                    message: 'Company site is required and cannot be empty'
                                }
                            }
                        },
                        stack_technology: {
                            validators: {
                                notEmpty: {
                                    message: 'Company technologies are required and cannot be empty'
                                }
                            }
                        },
                        product_direction: {
                            validators: {
                                notEmpty: {
                                    message: 'Company product directions are required and cannot be empty'
                                }
                            }
                        }
                    }


                })
                .on('err.field.fv', function (e, data) {
                    // $(e.target)  --> The field element
                    // data.fv      --> The FormValidation instance
                    // data.field   --> The field name
                    // data.element --> The field element

                    // Hide the messages
                    data.element
                        .data('fv.messages')
                        .find('.help-block[data-fv-for="' + data.field + '"]').hide();
                });
        })
    </script>
{% endblock %}

{% block page-heading-should-know %}
                    <h2>Text Editor</h2>
                    <ol class="breadcrumb">
                        <li>
                            <a href="/">Home</a>
                        </li>
                        <li>
                            <a href="/should-know/#tab-2">Should know - Companies</a>
                        </li>
                        <li class="active">
                            <strong>Write about company</strong>
                        </li>
                    </ol>
{% endblock %}

{% block should-know-content %}
    <form method="POST" action="" id="shouldKnowCompanyForm">{% csrf_token %}
    <div class="row">
        <div class="col-lg-4">
            <div class="ibox float-e-margins" align="center">
                <div class="ibox-content">
                    <div class="form-group">
                        {{ form.name }}
                        {% if form.errors.name %}
                            <p style="color: #1a7bb9; margin: 0;" align="left">
                                {{ form.errors.name.as_text }}
                            </p>
                        {% endif %}
                    </div>
                </div>
            </div>
        </div>
        <div class="col-lg-8">
            <div class="ibox float-e-margins" align="center">
                <div class="ibox-content">
                    <div class="form-group">
                        {{ form.description }}
                        {% if form.errors.description %}
                            <p style="color: #1a7bb9; margin: 0;" align="left">
                                {{ form.errors.description.as_text }}
                            </p>
                        {% endif %}
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-lg-4">
            <div class="ibox float-e-margins" align="center">
                <div class="ibox-content" style="padding-bottom: 20px !important;">
                    <div class="form-group" style="margin-bottom: 0px;">
                        <div id="myId" class="dropzone" style="height: 185px">
                            <input type="text" name="img" id="id_img" hidden>
                            <button type="submit" class="btn btn-success pull-right">Download photo!</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-lg-8">
            <div class="ibox float-e-margins" align="center">
                <div class="ibox-content">
                    <div class="row">
                        <div class="col-md-6">
                            <div class="form-group">
                                {{ form.location }}
                                {% if form.errors.location %}
                                    <p style="color: #1a7bb9; margin: 0;" align="left">
                                        {{ form.errors.location.as_text }}
                                    </p>
                                {% endif %}
                            </div>
                            <div class="form-group">
                                {{ form.email }}
                                {% if form.errors.email %}
                                    <p style="color: #1a7bb9; margin: 0;" align="left">
                                        {{ form.errors.email.as_text }}
                                    </p>
                                {% endif %}
                            </div>
                            <div class="form-group">
                                {{ form.skype }}
                                {% if form.errors.skype %}
                                    <p style="color: #1a7bb9; margin: 0;" align="left">
                                        {{ form.errors.skype.as_text }}
                                    </p>
                                {% endif %}
                            </div>
                            <div class="form-group">
                                {{ form.tel }}
                                {% if form.errors.tel %}
                                    <p style="color: #1a7bb9; margin: 0;" align="left">
                                        {{ form.errors.tel.as_text }}
                                    </p>
                                {% endif %}
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-group">
                                {{ form.facebook }}
                                {% if form.errors.facebook %}
                                    <p style="color: #1a7bb9; margin: 0;" align="left">
                                        {{ form.errors.facebook.as_text }}
                                    </p>
                                {% endif %}
                            </div>
                            <div class="form-group">
                                {{ form.vk }}
                                {% if form.errors.vk %}
                                    <p style="color: #1a7bb9; margin: 0;" align="left">
                                        {{ form.errors.vk.as_text }}
                                    </p>
                                {% endif %}
                            </div>
                            <div class="form-group">
                                {{ form.linked_in }}
                                {% if form.errors.linked_in %}
                                    <p style="color: #1a7bb9; margin: 0;" align="left">
                                        {{ form.errors.linked_in.as_text }}
                                    </p>
                                {% endif %}
                            </div>
                            <div class="form-group">
                                {{ form.twitter }}
                                {% if form.errors.twitter %}
                                    <p style="color: #1a7bb9; margin: 0;" align="left">
                                        {{ form.errors.twitter.as_text }}
                                    </p>
                                {% endif %}
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-lg-4">
            <div class="ibox float-e-margins" align="center">
                <div class="ibox-content">
                    <div class="row">
                        <div class="col-md-12">
                            <div class="form-group">
                                {{ form.link }}
                                {% if form.errors.link %}
                                    <p style="color: #1a7bb9; margin: 0;" align="left">
                                        {{ form.errors.link.as_text }}
                                    </p>
                                {% endif %}
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-6">
                            <div class="form-group">
                                {{ form.price_min }}
                                {% if form.errors.price_min %}
                                    <p style="color: #1a7bb9; margin: 0;" align="left">
                                        {{ form.errors.price_min.as_text }}
                                    </p>
                                {% endif %}
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-group">
                                {{ form.price_max }}
                                {% if form.errors.price_max %}
                                    <p style="color: #1a7bb9; margin: 0;" align="left">
                                        {{ form.errors.price_max.as_text }}
                                    </p>
                                {% endif %}
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-lg-4">
            <div class="ibox float-e-margins" align="center">
                <div class="ibox-content">
                    <div class="row">
                        <div class="col-lg-12">
                            <div class="form-group">
                                {{ form.stack_technology }}
                                {% if form.errors.stack_technology %}
                                    <p style="color: #1a7bb9; margin: 0;" align="left">
                                        {{ form.errors.stack_technology.as_text }}
                                    </p>
                                {% endif %}
                            </div>
                        </div>
                        <div class="col-lg-12">
                            <div class="form-group">
                                {{ form.product_direction }}
                                {% if form.errors.product_direction %}
                                    <p style="color: #1a7bb9; margin: 0;" align="left">
                                        {{ form.errors.product_direction.as_text }}
                                    </p>
                                {% endif %}
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>


    <button type="submit" class="btn btn-block btn-success">Save info about company</button>
    {% if company_id %}
        <a class="btn btn-block btn-success btn-outline" href="/should-know/company/{{ company_id }}">Return to company info</a>
    {% endif %}
    <a class="btn btn-block btn-success btn-outline" href="/should-know/#tab-2">Return to company list</a>
    <br>
    </form>


<style>
.form-control:focus,
.single-line:focus,
.chosen-container-active > .chosen-single, .chosen-drop,
.chosen-choices:focus,
.border-color-focus:focus
{
  border-color: #1a7bb9 !important;
}
.has-error .chosen-container .chosen-single,
.has-error .chosen-container .chosen-choices,
.has-error .note-editor
{
    border-color: #ed5565 !important;
}
.has-success .chosen-container .chosen-single,
.has-success .chosen-container .chosen-choices,
.has-success .note-editor
{
    border-color: #468847 !important;
}
</style>
{% endblock %}